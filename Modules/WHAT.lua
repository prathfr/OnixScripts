-- By MRUIAW. really stupid thing, right? :P

name = "WHAT"
description = "WHAT"

client.settings.addAir(5)
client.settings.addTitle("You might need a spyglass to let it work.... :P")
client.settings.addAir(5)
soundVolume = 100
alphaSetting = client.settings.addFloat("Volume", "soundVolume", 0, 100)


WHAT = AudioPlayer()
WHAT.looping = true

function render(dt)
    width = gui.width()
    height = gui.height()

	local inventory = player.inventory()
    local selectedItem = player.inventory().at(player.inventory().selected) or {}
    item = inventory.at(inventory.selected)

    

    if (selectedItem.name or ""):lower():find("pyglass") ~= nil then
        if item ~= nil then
            if playBGMstatus == 0 then
                playBGMstatus = 1
            end
            --[[  for debug
            gfx.text(300, 80, "Volume: " .. tostring(WHAT.volume))
            gfx.text(300, 88, "Muted: " .. tostring(WHAT.muted))
            gfx.text(300, 96, "Lopping: " .. tostring(WHAT.looping))
            gfx.text(300, 104, "position: " .. tostring(WHAT.position))
            gfx.text(300, 112, "Status: " .. WHAT.status)
            gfx.text(300, 120, "duration: " .. tostring(WHAT.duration))
            gfx.text(300, 128, "isFinished: " .. tostring(WHAT.isFinished))
            gfx.text(300, 136, "isPlaying: " .. tostring(WHAT.looping))
            gfx.text(300, 144, "isPaused: " .. tostring(WHAT.isisPaused))
            gfx.text(300, 152, "isStopped: " .. tostring(WHAT.isStopped))
            ]]
			gfx.image(0, 0, width, height, "Waht/textures/what2.png")
        end
        if playBGMstatus == 1 then
            WHAT.volume = soundVolume
            WHAT:play("Waht/sounds/what.ogg")
            playBGMstatus = 2
        end
	else
        playBGMstatus = 0
        WHAT:stop()
        return
    end
end

function postInit()
    playBGMstatus = 0  -- 0 = stop playing, 1 = ready to play, 2 = playing
end


--[[

          _____                    _____                    _____                _____          
         /\    \                  /\    \                  /\    \              /\    \         
        /::\____\                /::\____\                /::\    \            /::\    \        
       /:::/    /               /:::/    /               /::::\    \           \:::\    \       
      /:::/   _/___            /:::/    /               /::::::\    \           \:::\    \      
     /:::/   /\    \          /:::/    /               /:::/\:::\    \           \:::\    \     
    /:::/   /::\____\        /:::/____/               /:::/__\:::\    \           \:::\    \    
   /:::/   /:::/    /       /::::\    \              /::::\   \:::\    \          /::::\    \   
  /:::/   /:::/   _/___    /::::::\    \   _____    /::::::\   \:::\    \        /::::::\    \  
 /:::/___/:::/   /\    \  /:::/\:::\    \ /\    \  /:::/\:::\   \:::\    \      /:::/\:::\    \ 
|:::|   /:::/   /::\____\/:::/  \:::\    /::\____\/:::/  \:::\   \:::\____\    /:::/  \:::\____\
|:::|__/:::/   /:::/    /\::/    \:::\  /:::/    /\::/    \:::\  /:::/    /   /:::/    \::/    /
 \:::\/:::/   /:::/    /  \/____/ \:::\/:::/    /  \/____/ \:::\/:::/    /   /:::/    / \/____/ 
  \::::::/   /:::/    /            \::::::/    /            \::::::/    /   /:::/    /          
   \::::/___/:::/    /              \::::/    /              \::::/    /   /:::/    /           
    \:::\__/:::/    /               /:::/    /               /:::/    /    \::/    /            
     \::::::::/    /               /:::/    /               /:::/    /      \/____/             
      \::::::/    /               /:::/    /               /:::/    /                           
       \::::/    /               /:::/    /               /:::/    /                            
        \::/____/                \::/    /                \::/    /                             
         ~~                       \/____/                  \/____/                              
                                                                                                





 /$$      /$$ /$$   /$$  /$$$$$$  /$$$$$$$$
| $$  /$ | $$| $$  | $$ /$$__  $$|__  $$__/
| $$ /$$$| $$| $$  | $$| $$  \ $$   | $$   
| $$/$$ $$ $$| $$$$$$$$| $$$$$$$$   | $$   
| $$$$_  $$$$| $$__  $$| $$__  $$   | $$   
| $$$/ \  $$$| $$  | $$| $$  | $$   | $$   
| $$/   \  $$| $$  | $$| $$  | $$   | $$   
|__/     \__/|__/  |__/|__/  |__/   |__/   
                                           
                                           
                                           




░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░░▒▓██████▓▒░▒▓████████▓▒░ 
░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓████████▓▒░▒▓████████▓▒░ ░▒▓█▓▒░     
░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
░▒▓█▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
 ░▒▓█████████████▓▒░░▒▓█▓▒░░▒▓█▓▒░▒▓█▓▒░░▒▓█▓▒░ ░▒▓█▓▒░     
                                                            
                                                            




 
 _    _ _   _   ___ _____ 
| |  | | | | | / _ \_   _|
| |  | | |_| |/ /_\ \| |  
| |/\| |  _  ||  _  || |  
\  /\  / | | || | | || |  
 \/  \/\_| |_/\_| |_/\_/  
                          
                          



 
      ___           ___           ___           ___     
     /\__\         /\__\         /\  \         /\  \    
    /:/ _/_       /:/  /        /::\  \        \:\  \   
   /:/ /\__\     /:/__/        /:/\:\  \        \:\  \  
  /:/ /:/ _/_   /::\  \ ___   /::\~\:\  \       /::\  \ 
 /:/_/:/ /\__\ /:/\:\  /\__\ /:/\:\ \:\__\     /:/\:\__\
 \:\/:/ /:/  / \/__\:\/:/  / \/__\:\/:/  /    /:/  \/__/
  \::/_/:/  /       \::/  /       \::/  /    /:/  /     
   \:\/:/  /        /:/  /        /:/  /     \/__/      
    \::/  /        /:/  /        /:/  /                 
     \/__/         \/__/         \/__/                  






 __    __        _   _____ 
/ / /\ \ \/\  /\/_\ /__   \
\ \/  \/ / /_/ //_\\  / /\/
 \  /\  / __  /  _  \/ /   
  \/  \/\/ /_/\_/ \_/\/    
                           





░  ░░░░  ░░  ░░░░  ░░░      ░░░        ░
▒  ▒  ▒  ▒▒  ▒▒▒▒  ▒▒  ▒▒▒▒  ▒▒▒▒▒  ▒▒▒▒
▓        ▓▓        ▓▓  ▓▓▓▓  ▓▓▓▓▓  ▓▓▓▓
█   ██   ██  ████  ██        █████  ████
█  ████  ██  ████  ██  ████  █████  ████
                                        





██╗    ██╗██╗  ██╗ █████╗ ████████╗
██║    ██║██║  ██║██╔══██╗╚══██╔══╝
██║ █╗ ██║███████║███████║   ██║   
██║███╗██║██╔══██║██╔══██║   ██║   
╚███╔███╔╝██║  ██║██║  ██║   ██║   
 ╚══╝╚══╝ ╚═╝  ╚═╝╚═╝  ╚═╝   ╚═╝   
                                   




 █     █░ ██░ ██  ▄▄▄     ▄▄▄█████▓
▓█░ █ ░█░▓██░ ██▒▒████▄   ▓  ██▒ ▓▒
▒█░ █ ░█ ▒██▀▀██░▒██  ▀█▄ ▒ ▓██░ ▒░
░█░ █ ░█ ░▓█ ░██ ░██▄▄▄▄██░ ▓██▓ ░ 
░░██▒██▓ ░▓█▒░██▓ ▓█   ▓██▒ ▒██▒ ░ 
░ ▓░▒ ▒   ▒ ░░▒░▒ ▒▒   ▓▒█░ ▒ ░░   
  ▒ ░ ░   ▒ ░▒░ ░  ▒   ▒▒ ░   ░    
  ░   ░   ░  ░░ ░  ░   ▒    ░      
    ░     ░  ░  ░      ░  ░        
                                   

]]